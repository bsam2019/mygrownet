<!DOCTYPE html>
<html>
<head>
    <title>Live Chat Test</title>
    <meta name="csrf-token" content="test-token">
</head>
<body>
    <h1>Live Chat Test</h1>
    <div id="test-results"></div>

    <script>
        const results = document.getElementById('test-results');
        
        function log(message, type = 'info') {
            const p = document.createElement('p');
            p.style.color = type === 'error' ? 'red' : type === 'success' ? 'green' : 'black';
            p.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            results.appendChild(p);
        }

        // Test 1: Check if CSRF token exists
        const csrfToken = document.querySelector('meta[name="csrf-token"]')?.getAttribute('content');
        log(`CSRF Token: ${csrfToken ? 'Found' : 'Missing'}`, csrfToken ? 'success' : 'error');

        // Test 2: Check if route helper exists
        if (typeof route === 'function') {
            log('Route helper: Available', 'success');
            try {
                const testRoute = route('employee.portal.support.chat', 1);
                log(`Test route generated: ${testRoute}`, 'success');
            } catch (e) {
                log(`Route generation error: ${e.message}`, 'error');
            }
        } else {
            log('Route helper: Not available', 'error');
        }

        // Test 3: Check if Echo is available
        if (window.Echo) {
            log('Echo: Available', 'success');
            log(`Echo broadcaster: ${window.Echo.connector?.options?.broadcaster || 'unknown'}`, 'info');
        } else {
            log('Echo: Not available', 'error');
        }

        // Test 4: Check if Pusher is available
        if (window.Pusher) {
            log('Pusher: Available', 'success');
        } else {
            log('Pusher: Not available', 'error');
        }

        log('Test completed', 'info');
    </script>
</body>
</html>
